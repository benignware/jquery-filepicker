+function(e,h){var i=(function(){var aA=document,W=h,am="div",ay="wrap",az="push",ai="join",ar="data",ag="split",ap="object",T="string",P="replace",Y="element",aj="nodeType",S="innerHTML",al="attributes",au="childNodes",at="parentNode",af="firstChild",ak="appendChild",X="insertBefore",Z="replaceChild",ae="setAttribute",Q="createElement",aE="data-variable",aB="querySelectorAll",U="createDocumentFragment",ab={start:"#{",end:"}",buffer:""},aC={start:"<%",end:"%>",buffer:"="},aq=(function(){var m={};return function(n,p,r){r=r||{};for(var s in ad){p["_"+s]=(function(v,u){return function(){v._data=u;var w=v.apply(this,arguments);delete v._data;return w}})(ad[s],p)}var o=r.tokens||aC;var q=m[n]=m[n]||new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n[P](/[\r\t\n]/g," ")[ag](o.start)[ai]("\t")[P](new RegExp("\\(\\(\\^\\|"+o.end+"\\)\\[\\^\t\\]\\*\\)","g"),"$1\r")[P](new RegExp("\t"+o.buffer+"(.*?)"+o.end,"g"),"',$1,'")[ag]("\t")[ai]("');")[ag](o.end)[ai]("p.push('")[ag]("\r")[ai]("\\'")+"');} p = p.filter(function(v) {return typeof v == 'string' ? v.replace(/^s+|s+$/g, '').length : true});for (var i = 0; i < p.length; i++) { var o = p[i]; if (o && o.outerHTML) p[i] = o.outerHTML; }return p.length > 1 ? p.join('') : typeof p[0] == 'undefined' ? '' : p[0];");var t=p?q(p):q;for(var s in ad){delete p["_"+s]}return t}})();function an(A,s,z){z=z||{};var u=aw(s);for(var v in u){var B=u[v];B[aj]?B[ae](aE,v):null}var r=aq(A,s,z);var y=ax(r);var o=y[aB]("*["+aE+"]");var o=y.querySelectorAll("*["+aE+"]");for(var t=0,C;C=o[t];t++){var x=C.getAttribute(aE),B=u[x];if(B){if(B[aj]){for(var n=0,q;q=C[al][n];n++){B[ae](q.nodeName,q.nodeValue)}if(!B[au].length){for(var p=0,w=C[au];p<w.length;p++){B[ak](w[p--])}}C[at][Z](B,C)}else{if(typeof elem!="object"){var m=B;B=C;B[S]=m}}}}for(var v in u){var B=u[v];B[aj]?B.removeAttribute(aE):null}return y}var ad={build:function(){return aa.call(this,arguments[0],arguments[1],arguments.callee._data)}};function aa(t,p,u){var m=null,u=u||{};if(typeof p=="string"){m=an(p,u,{helpers:ad})}else{if(p instanceof Array){m=t=t||aA[U]();for(var s=0,n;n=p[s];s++){t[ak](aa.call(this,null,n,u))}}else{if(typeof p=="object"){var r=t||p[Y];m=(function(){if(typeof r=="string"){var v=an(r,u,{helpers:ad,tokens:ab})[au];if(v.length==1&&v[0][aj]==1){return v[0]}else{throw ("property 'element' must evaluate to a single dom element")}}else{if(typeof r=="object"&&r[aj]){return r}}return null})()||aA[Q](p.nodeName||p.tagName||am);t=m;var o=p[ay];for(var q in p[al]){t[ae](aD(q),aq(p[al][q],u))}if(p[au]){aa.call(this,t,p[au],u)}av(t,p,u);if(o){m=t=V(t,aa.call(this,null,o,u))}}}}return m}var ao=[];function ac(o){for(var p=0,m;m=ao[p];p++){if(m[Y]==o){ao.splice(p--,1);for(var q=0,n;n=m.markup[q];q++){n[at][Z](o,n)}break}}}function ah(s,p,t){t=t||{};ac.call(this,s);var r=s.cloneNode(),q=s[at],v=r;q?q[X](r,s):null;var n=p[au];if(typeof p=="object"&&!(p instanceof Array)&&(!n||n.length==1)){p[Y]=s}t[Y]=t[Y]||s;var m=aa.call(this,null,p,t);var w=[],o=m[au];for(var u=0,x;x=o[u];u++){w[az](x)}ao[az]({element:s,markup:w});if(v){v[at][Z](m,v)}return m}function R(){}R.prototype={render:function(q,p,m){var n=typeof q==T?aA[aB](q):q instanceof Array?q:[q];for(var r=0,o;o=n[r];r++){ah.call(this,o,p,m)}return n},clean:function(m){ac.call(this,m)},helpers:ad};function aD(m){return m[P](/\W+/g,"-")[P](/([a-z\d])([A-Z])/g,"$1-$2")}function ax(o){if(typeof o!="string"){return o}var m,n=aA[Q](am),p=aA[U]();n[S]=o;while(m=n[af]){p[ak](m)}return p}function av(p,o,m){for(var q in o){if(!!([Y,al,ar,au,ay].indexOf(q)+1)){continue}var n=o[q];typeof n==ap&&!n[aj]?arguments.callee(p[q]||{},n,m):p[q]=typeof n==T?aq(n,m,{helpers:ad,tokens:n.indexOf(aC.start)>=0?aC:ab}):n}return p}function V(p,m){if(!m){return p}var o=p[at],n=p.nextSibling;m=m[aj]===11?m[af]:m;m[ak](p);if(o){o[X](m,n)}return m}function aw(n,o,r){o=o||"",r=r||{};for(var p in n){var q=n[p],m=o?o+"["+p+"]":p;if(typeof q=="undefined"||q==null){continue}r[m]=q;if(typeof q==ap&&!q.outerHTML){aw(q,m,r)}}return r}if(e=jQuery){e.fn.render=e.fn.render||function(n,m){return this.each(function(){W.mugine.render(this,n,m);return e(this)})}}W.Mugine=W.Mugine||R;W.mugine=W.mugine||new R();return R})();var a=e(h);var g="filepicker";var c={style:"auto",renderUI:null,renderThumbnail:null};var l=["label"];function f(n){var m=/\/([^\\\/:*?\"<>|]+)$/i.exec(n);if(m){return m[1]}return null}function j(n){var m=/\.([0-9a-z]+)(?:[\?#]|$)/i.exec(n);if(m){return m[1]}return null}function b(q,r){var A=e(q);var G=this;var t=[];var u=new i();var z=e("<div></div>"),B=z.get(0);var o=e("<input/>"),y=o.get(0);var s=e('<button type="button"></button>'),n=s.get(0);var E=typeof r.style=="string"?e.fn.filepicker.getStyle(r.style=="auto"?x()?"bootstrap":H()?"jquery-ui":"default":r.style):r.style;a.on("resize",function(I){F.call(G)});A.on("change",function(I){m(I)});s.on("click",function(){A.trigger("click")});o.on("click",function(){A.trigger("click")}).on("focus",function(){e(this).blur()});function p(){var J=true;if(typeof r.renderUI=="function"){var K=r.renderUI.call(this,q,n,y,B);if(typeof K!="undefined"){J=K}}if(J){var I=u.render(q,E.ui,{button:n,input:y,preview:B})}}function v(){}function w(){var I=e(t).map(function(){return this.name}).get();e(y).prop("value",I.join(", "))}function D(){var I=this;z.html("");e(t).each(function(){if(!this.type.match("image.*")){return}var K=e('<img src="'+this.src+'" title="'+this.name+'" style="max-width: 100%; height: auto"/>');z.append(K);var J=true;if(typeof r.renderThumbnail=="function"){var L=r.renderThumbnail.call(I,K[0],this);if(typeof L!="undefined"){J=L}}if(J){u.render(K.get(0),E.thumbnail,this)}})}function F(){A.css({position:"absolute",visibility:"hidden"});if(typeof r.resize=="function"){r.resize.call(this)}}function m(J){t=J.target.files;for(var L=0,K;K=t[L];L++){if(!K.type.match("image.*")){continue}var I=new FileReader();I.onload=(function(M){return function(N){M.src=N.target.result;D()}})(K);I.readAsDataURL(K)}if(typeof r.change==="function"){r.change.call(this,t)}w.call(G)}function x(){return e("<div></div>").addClass("pull-right").css("float")=="right"}function H(){return e("<div></div>").addClass("ui-front").css("z-index")>1}function C(){var J=A.attr("value");var I=J?J.split(","):[];t=e(I).map(function(){var K=f(this);var M=j(this);var L="";if(e.inArray(M,["jpg","jpeg","png","gif"])>=0){L="image/"+M}return{name:K,type:L,src:this}}).get();p.call(this);D.call(this);F.call(this);w.call(this)}C.call(this)}var k=b;e.fn[g]=function(m){m=e.extend({},c,m);return this.each(function(){if(!e(this).data(g)){e(this).data(g,new k(this,m))}return e(this)})};var d={"default":{ui:[{element:"#{ preview }",className:"filepicker-preview"},{className:"filepicker-ui",childNodes:[{element:"#{ button }",innerHTML:'<%= element.getAttribute("data-label") %>'},{element:"#{ input }"}]},{element:"#{ element }"}],thumbnail:{wrap:'<div style="margin-bottom: 20px; text-align: center; border-radius: 5px"></div>',style:"max-width: 100%"}},bootstrap:{ui:[{element:"#{ preview }"},{className:"input-group",childNodes:[{element:"#{ button }",className:"btn btn-default",wrap:'<div class="input-group-btn"></div>',innerHTML:'<i class="glyphicon glyphicon-upload"></i> <%= element.getAttribute("data-label") %>'},{element:"#{ input }",className:"form-control",placeholder:"#{ element.placeholder }"}]},{element:"#{ element }"}],thumbnail:{wrap:'<div class="thumbnail"></div>'}},"jquery-ui":{ui:[{element:"#{ preview }"},{className:"ui-buttonset",childNodes:[{element:"#{ button }",className:'ui-button ui-state-default ui-corner-left <% if (!element.getAttribute("data-label")) { %> ui-button-icon-only<% } else { %> ui-button-text-icon-primary<% } %>',innerHTML:'<span class="ui-button-icon-primary ui-icon  ui-icon-document"></span><span class="ui-button-text"><%= element.getAttribute("data-label") || "&nbsp;" %></span>'},{element:"#{ input }",className:"ui-button ui-state-default ui-corner-right",placeholder:"#{ element.placeholder }"},{element:"#{ element }"}]}],thumbnail:{wrap:'<div style="padding: 5px; margin-bottom: 20px; text-align: center" class="ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>',style:{maxWidth:"100%"}}}};e.fn[g].registerStyle=function(m,n){d[m]=n};e.fn[g].getStyle=function(m){return d[m]}}(jQuery,window);