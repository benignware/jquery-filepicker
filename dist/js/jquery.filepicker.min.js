+function(e,h){var i=(function(){var ax=document,U=h,aj="div",av="wrap",aw="push",af="join",ao="data",ad="split",am="object",R="string",N="replace",W="element",ag="nodeType",Q="innerHTML",ai="attributes",aq="childNodes",ap="parentNode",ac="firstChild",ah="appendChild",V="insertBefore",X="replaceChild",ab="setAttribute",O="createElement",aA="data-variable",ay="querySelectorAll",S="createDocumentFragment",an=(function(){var m={};return function(n,p,r){r=r||{};for(var s in aa){p["_"+s]=(function(v,u){return function(){v._data=u;var w=v.apply(this,arguments);delete v._data;return w}})(aa[s],p)}var o=r.tokens||{};o.buffer=o.buffer||"=";o.start=o.start||"<%";o.end=o.end||"%>";var q=m[n]=m[n]||new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n[N](/[\r\t\n]/g," ")[ad](o.start)[af]("\t")[N](new RegExp("\\(\\(\\^\\|"+o.end+"\\)\\[\\^\t\\]\\*\\)","g"),"$1\r")[N](new RegExp("\t"+o.buffer+"(.*?)"+o.end,"g"),"',$1,'")[ad]("\t")[af]("');")[ad](o.end)[af]("p.push('")[ad]("\r")[af]("\\'")+"');} p = p.filter(function(v) {return typeof v == 'string' ? v.replace(/^s+|s+$/g, '').length : true});for (var i = 0; i < p.length; i++) { var o = p[i]; if (o && o.outerHTML) p[i] = o.outerHTML; }return p.length > 1 ? p.join('') : typeof p[0] == 'undefined' ? '' : p[0];");var t=p?q(p):q;for(var s in aa){delete p["_"+s]}return t}})();function ak(B,t,y){var v=at(t);for(var w in v){var C=v[w];C[ag]?C[ab](aA,w):null}var s=an(B,t,y);var A=au(s);var p=A[ay]("*["+aA+"]");var p=A.querySelectorAll("*["+aA+"]");for(var u=0,m;m=p[u];u++){var z=m.getAttribute(aA),C=v[z];if(C){if(C[ag]){for(var o=0,r;r=m[ai][o];o++){C[ab](r.nodeName,r.nodeValue)}if(!C[aq].length){for(var q=0,x=m[aq];q<x.length;q++){C[ah](x[q--])}}m[ap][X](C,m)}else{if(typeof elem!="object"){var n=C;C=m;C[Q]=n}}}}for(var w in v){var C=v[w];C[ag]?C.removeAttribute(aA):null}return A}var aa={build:function(){return Y.call(this,arguments[0],arguments[1],arguments.callee._data)}};function Y(t,p,u){var m=null,u=u||{};if(typeof p=="string"){m=ak(p,u,aa)}else{if(p instanceof Array){m=t=t||ax[S]();for(var s=0,n;n=p[s];s++){t[ah](Y.call(this,null,n,u))}}else{if(typeof p=="object"){var r=p[W];m=t=t&&t[ag]?t:r&&r[ag]?r:typeof r=="string"?ak(r,u,aa)[ac]:ax[O](p.nodeName||p.tagName||aj);var o=p[av];for(var q in p[ai]){t[ab](az(q),an(p[ai][q],u))}if(p[aq]){Y.call(this,t,p[aq],u)}ar(t,p,u);if(o){m=t=T(t,Y.call(this,null,o,u))}}}}return m}var al=[];function Z(o){for(var p=0,m;m=al[p];p++){if(m[W]==o){al.splice(p--,1);for(var q=0,n;n=m.markup[q];q++){n[ap][X](o,n)}break}}}function ae(s,p,t){t=t||{};Z.call(this,s);var r=s.cloneNode(),q=s[ap],v=r;q?q[V](r,s):null;var n=p[aq];if(typeof p=="object"&&!(p instanceof Array)&&(!n||n.length==1)){p[W]=s}t[W]=t[W]||s;var m=Y.call(this,null,p,t);var w=[],o=m[aq];for(var u=0,x;x=o[u];u++){w[aw](x)}al[aw]({element:s,markup:w});if(v){v[ap][X](m,v)}return m}function P(){}P.prototype={render:function(q,p,m){var n=typeof q==R?ax[ay](q):q instanceof Array?q:[q];for(var r=0,o;o=n[r];r++){ae.call(this,o,p,m)}return n},clean:function(m){Z.call(this,m)},helpers:aa};function az(m){return m[N](/\W+/g,"-")[N](/([a-z\d])([A-Z])/g,"$1-$2")}function au(o){if(typeof o!="string"){return o}var m,n=ax[O](aj),p=ax[S]();n[Q]=o;while(m=n[ac]){p[ah](m)}return p}function ar(p,o,m){for(var q in o){if(!!([W,ai,ao,aq,av].indexOf(q)+1)){continue}var n=o[q];typeof n==am&&!n[ag]?arguments.callee(p[q]||{},n,m):p[q]=typeof n==R?an(n,m):n}return p}function T(p,m){if(!m){return p}var o=p[ap],n=p.nextSibling;m=m[ag]===11?m[ac]:m;m[ah](p);if(o){o[V](m,n)}return m}function at(n,o,r){o=o||"",r=r||{};for(var p in n){var q=n[p],m=o?o+"["+p+"]":p;if(typeof q=="undefined"||q==null){continue}r[m]=q;if(typeof q==am&&!q.outerHTML){at(q,m,r)}}return r}if(e=jQuery){e.fn.render=e.fn.render||function(n,m){return this.each(function(){U.mugine.render(this,n,m);return e(this)})}}U.Mugine=U.Mugine||P;U.mugine=U.mugine||new P();return P})();var a=e(h);var g="filepicker";var c={style:"bootstrap3"};var l=["label"];function f(n){var m=/\/([^\\\/:*?\"<>|]+)$/i.exec(n);if(m){return m[1]}return null}function j(n){var m=/\.([0-9a-z]+)(?:[\?#]|$)/i.exec(n);if(m){return m[1]}return null}function b(q,r){var A=e(q);var G=this;var t=[];var u=new i();var z=e("<div></div>"),B=z.get(0);var o=e("<input/>"),y=o.get(0);var s=e('<button type="button"></button>'),n=s.get(0);var E=e.fn.filepicker.getStyle(r.style=="auto"?x()?"bootstrap":H()?"jquery-ui":"default":r.style);a.on("resize",function(I){F.call(G)});A.on("change",function(I){m(I)});s.on("click",function(){A.trigger("click")});o.on("click",function(){A.trigger("click")}).on("focus",function(){e(this).blur()});function p(){var I=u.render(q,E.ui,{button:n,input:y,preview:B})}function v(){}function w(){var I=e(t).map(function(){return this.name}).get();e(y).prop("value",I.join(", "))}function D(){z.html("");e(t).each(function(){if(!this.type.match("image.*")){return}var I=e('<img src="'+this.src+'" title="'+this.name+'"/>');z.append(I);u.render(I.get(0),E.thumbnail,this)})}function F(){A.css({position:"absolute",visibility:"hidden"})}function m(J){t=J.target.files;for(var L=0,K;K=t[L];L++){if(!K.type.match("image.*")){continue}var I=new FileReader();I.onload=(function(M){return function(N){M.src=N.target.result;D()}})(K);I.readAsDataURL(K)}w.call(G)}function x(){return e("<div></div>").addClass("pull-right").css("float")=="right"}function H(){return e("body").hasClass("jquery-ui")}function C(){var J=A.attr("value");var I=J?J.split(","):[];t=e(I).map(function(){var K=f(this);var M=j(this);var L="";if(e.inArray(M,["jpg","jpeg","png","gif"])>=0){L="image/"+M}return{name:K,type:L,src:this}}).get();p.call(this);D.call(this);F.call(this);w.call(this)}C.call(this)}var k=b;e.fn[g]=function(m){m=e.extend({},c,m);return this.each(function(){if(!e(this).data(g)){e(this).data(g,new k(this,m))}return e(this)})};var d={"default":{ui:[{element:"<%= preview %>",className:"filepicker-preview"},{className:"filepicker-ui",childNodes:[{element:"<%= button %>",innerHTML:'<%= element.getAttribute("data-label") %>'},{element:"<%= input %>"}]},{element:"<%= element %>"}],thumbnail:{wrap:'<div style="margin-bottom: 20px; text-align: center; border-radius: 5px"></div>',style:"max-width: 100%"}},bootstrap:{ui:[{element:"<%= preview %>"},{className:"input-group",childNodes:[{element:"<%= button %>",className:"btn btn-default",wrap:'<div class="input-group-btn"></div>',innerHTML:'<i class="glyphicon glyphicon-upload"></i> <%= element.getAttribute("data-label") %>'},{element:"<%= input %>",className:"form-control",placeholder:"<%= element.placeholder %>"}]},{element:"<%= element %>"}],thumbnail:{wrap:'<div class="thumbnail"></div>'}},"jquery-ui":{ui:[{element:"<%= preview %>"},{className:"ui-buttonset",childNodes:[{element:"<%= button %>",className:'ui-button ui-state-default ui-corner-left <% if (!element.getAttribute("data-label")) { %> ui-button-icon-only<% } else { %> ui-button-text-icon-primary<% } %>',innerHTML:'<span class="ui-button-icon-primary ui-icon  ui-icon-document"></span><span class="ui-button-text"><%= element.getAttribute("data-label") || "&nbsp;" %></span>'},{element:"<%= input %>",className:"ui-button ui-state-default ui-corner-right",placeholder:"<%= element.placeholder %>"},{element:"<%= element %>"}]}],thumbnail:{wrap:'<div style="padding: 5px; margin-bottom: 20px; text-align: center" class="ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>',style:{maxWidth:"100%"}}}};e.fn[g].registerStyle=function(m,n){d[m]=n};e.fn[g].getStyle=function(m){return d[m]}}(jQuery,window);